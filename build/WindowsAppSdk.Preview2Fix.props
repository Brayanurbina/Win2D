<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- WindowsAppSdk 1.0.0-preview2 has a bug where a .winmd was renamed, but the build files still
        reference the old winmd name (oops). This is an extremely hacky workaround that fixes these
        incorrect references. This file must be included after all the WindowsAppSdk build files, at
        the end of the project file.  -->
  <ItemGroup>
    <Reference Remove="Microsoft.Windows.ApplicationModel.WindowsAppSDK.winmd" />
    <Reference Include="Microsoft.Windows.ApplicationModel.WindowsAppRuntime.winmd">
      <HintPath>$(_WindowsAppSdkPackageRoot)\lib\uap10.0\Microsoft.Windows.ApplicationModel.WindowsAppRuntime.winmd</HintPath>
      <Implementation Condition="'$(WindowsAppSDKFrameworkPackage)' != 'true'">$(_WindowsAppSdkPackageRoot)\runtimes\win10-$(_WindowsAppSDKFoundationPlatform)\native\Microsoft.WindowsAppRuntime.dll</Implementation>
      <IsWinMDFile>true</IsWinMDFile>
    </Reference>
  </ItemGroup>

  <ItemGroup>
    <Reference Remove="$(_WindowsAppSdkPackageRoot)\build\native\..\..\lib\uap10.0\Microsoft.Windows.ApplicationModel.WindowsAppSDK.winmd" />
    <Reference Include="$(_WindowsAppSdkPackageRoot)\build\native\..\..\lib\uap10.0\Microsoft.Windows.ApplicationModel.WindowsAppRuntime.winmd">
      <Private>false</Private>
      <Implementation>Microsoft.WindowsAppRuntime.dll</Implementation>
    </Reference>
  </ItemGroup>
</Project>
