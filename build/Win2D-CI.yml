# Please see https://www.osgwiki.com/wiki/Windows_App_SDK_-_How_to_build_and_use_the_pipelines
# for information on how to use the pipelines

trigger:
  branches:
    include:
    - refs/heads/master

name: $(BuildDefinitionName)-$(date:yyMMdd)
parameters:
- name: RunTests
  displayName: "Run Tests"
  type: boolean
  default: True
- name: PushPackageToInternalFeed
  displayName: "(TODO) Push Windows App SDK Packages To InternalFeed"
  type: boolean
  default: False
variables:
- name: PackageSuffix
  value: $[format('-CI-{0:yyMMdd}.{1}', pipeline.startTime, counter(format('{0}.{1}', variables['Build.DefinitionName'], format('{0:yyMMdd}', pipeline.startTime)), 0))]

resources:
  repositories:
  - repository: self
    type: git
    ref: refs/heads/master

stages:
- template: AzurePipelineTemplates\Win2D-Stages.yml
  parameters:
    # PipelineName: ${{ variables.BuildDefinitionName }}.${{ variables.dateAndCounter }}
    RunTests: ${{ parameters.RunTests }}
    PushPackageToInternalFeed: ${{ parameters.PushPackageToInternalFeed }}
    PipelineType: 'CI'